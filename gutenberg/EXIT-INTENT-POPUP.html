<!-- EXIT-INTENT POPUP - HYBRID SOLUTION -->
<!-- beeker1121/exit-intent-popup + GenerateBlocks Overlay Panel -->
<!--
üéØ –ê–†–•–Ü–¢–ï–ö–¢–£–†–ê:
- bioEp (beeker1121) - exit-intent detection + cookie tracking (30 –¥–Ω—ñ–≤)
- GenerateBlocks Overlay Panel - –¥–∏–∑–∞–π–Ω + –∞–Ω—ñ–º–∞—Ü—ñ—ó
- Events API - form handling + Lead CPT integration
- exit-intent-overlay.js - –ø–æ–≤–Ω–∏–π —Ö–µ–Ω–¥–ª–µ—Ä (v2.0.0)

–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø –î–õ–Ø –í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø:

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π Element —É WordPress:
   GeneratePress > Elements > Add New > Block Element
   Element Type: Content
   Name: "Exit-Intent Popup"

2. –î–æ–¥–∞–π—Ç–µ –±–ª–æ–∫ Overlay Panel:
   –£ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ –¥–æ–¥–∞–π—Ç–µ –±–ª–æ–∫ "Overlay Panel" (GenerateBlocks Pro 2.3+)

3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Overlay Panel Settings:
   ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û - –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Exit Intent —Ç—Ä–∏–≥–µ—Ä!

   Settings:
   - Trigger: NONE (manual trigger via JavaScript) ‚úÖ
   - Panel ID: medici-exit-intent-panel ‚úÖ (–û–ë–û–í'–Ø–ó–ö–û–í–û!)
   - Animation: Scale In
   - Duration: 300ms
   - Show once per session: DISABLED (bioEp –∫–µ—Ä—É—î cookie)

4. –î–æ–¥–∞–π—Ç–µ Shortcode block –í–°–ï–†–ï–î–ò–ù–£ Overlay Panel:

   ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ SHORTCODE block, –ù–ï HTML block!

   –ü—Ä–∏—á–∏–Ω–∞: WordPress —Ä–µ–¥–∞–∫—Ç–æ—Ä "—Å–∞–Ω—ñ—Ç–∞–π–∑–∏—Ç—å" HTML —ñ –≤–∏–¥–∞–ª—è—î <form>, <input>, <svg> –µ–ª–µ–º–µ–Ω—Ç–∏.
   Shortcode –≥–∞—Ä–∞–Ω—Ç—É—î –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—î—ó —Ä–æ–∑–º—ñ—Ç–∫–∏ –ø—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è.

   ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û: –ù–ï —Å—Ç–≤–æ—Ä—é–π—Ç–µ –æ–∫—Ä–µ–º—É –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä–∏—Ç—Ç—è –≤ Overlay Panel!

   Shortcode –≤–∂–µ –º—ñ—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä–∏—Ç—Ç—è (√ó) —Ç–∞ –∫–Ω–æ–ø–∫—É "–ù—ñ, –¥—è–∫—É—é...".
   –î–æ–¥–∞–≤–∞–Ω–Ω—è —â–µ –æ–¥–Ω—ñ—î—ó –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ GenerateBlocks Button block —Å—Ç–≤–æ—Ä–∏—Ç—å –¥—É–±–ª—ñ–∫–∞—Ç
   —ñ –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –≤ CSS —Ç–∞ JavaScript.

   –í—Å—Ç–∞–≤—Ç–µ —É Shortcode block:

   [medici_exit_intent_popup]

   –ê–±–æ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

   [medici_exit_intent_popup
     title="–ó–∞—á–µ–∫–∞–π—Ç–µ! –ù–µ –π–¥—ñ—Ç—å –±–µ–∑ –ø–æ–¥–∞—Ä—É–Ω–∫–∞"
     subtitle="–û—Ç—Ä–∏–º–∞–π—Ç–µ <strong>–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</strong> –≤—ñ–¥ –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤."
     button_text="–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é"]

5. Display Rules:
   - Location: Entire Site
   - Device: Desktop (>1024px)

6. –î–æ–¥–∞–π—Ç–µ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π —Ç—Ä–∏–≥–µ—Ä —á–µ—Ä–µ–∑ GeneratePress Hook:
   GeneratePress > Elements > Add New > Hook Element
   Name: "Exit-Intent Trigger"
   Hook: wp_footer
   Priority: 999

   Content:
   <button
     class="exit-intent-trigger"
     data-gb-overlay="medici-exit-intent-panel"
     aria-hidden="true"
     style="display: none !important; visibility: hidden !important; position: absolute !important; left: -9999px !important;">
   </button>

7. –ê–∫—Ç–∏–≤—É–π—Ç–µ –æ–±–∏–¥–≤–∞ Elements

8. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ JavaScript —Ñ–∞–π–ª–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∏—Å—å:
   - bioep.min.js (beeker1121 library - window.bioEp object)
   - exit-intent-overlay.js (–ø–æ–≤–Ω–∏–π —Ö–µ–Ω–¥–ª–µ—Ä v2.1.3)

9. Debug (—è–∫—â–æ WP_DEBUG = true):
   –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–∫–∞–∂–µ:
   - [Medici Exit-Intent] Initialized
   - [Medici Exit-Intent] bioEp.loadEvents() overridden (exit-intent only)
   - [Medici Exit-Intent] bioEp.showPopup() intercepted
   - [Medici Exit-Intent] bioEp configured (window.bioEp.init)
   - [Medici Exit-Intent] Form handler attached

   –ü—Ä–∏ exit-intent:
   - [Medici Exit-Intent] Overlay opened: medici-exit-intent-panel

   –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª—ñ:
   - typeof window.bioEp ‚Üí 'object' (NOT 'function'!)
   - typeof window.bioEp.init ‚Üí 'function'
   - typeof window.mediciExitIntentConfig ‚Üí 'object'
   - window.mediciBioEpPatched ‚Üí true (–ø—ñ—Å–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó)

üîß –Ø–ö –ü–†–ê–¶–Æ–Ñ:
1. exit-intent-overlay.js –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î 3 –º–µ—Ç–æ–¥–∏ bioEp (–ü–ï–†–ï–î init):
   - bioEp.addCSS() ‚Üí no-op (–±–µ–∑ CSS —ñ–Ω º—î–∫—Ü—ñ—ó)
   - bioEp.addPopup() ‚Üí no-op (–±–µ–∑ DOM popup)
   - bioEp.loadEvents() ‚Üí exit-intent detector only (–±–µ–∑ closeBtnEl/resize)

2. bioEp.init() –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ë–ï–ó —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–π–≤–æ–≥–æ DOM/CSS/–ø–æ–¥—ñ–π
3. bioEp –¥–µ—Ç–µ–∫—Ç–∏—Ç—å exit-intent —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∏–π mouseout handler:
   - –Ü–≥–Ω–æ—Ä—É—î —Ñ–æ—Ä–º–∏ (input/select/textarea)
   - –Ü–≥–Ω–æ—Ä—É—î –ø—Ä–∞–≤—É —á–∞—Å—Ç–∏–Ω—É –µ–∫—Ä–∞–Ω—É (scrollbar, 50px)
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î clientY < 50 (—Ä—É—Ö –¥–æ –≤–µ—Ä—Ö—É)
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î relatedTarget = null (–≤–∏—Ö—ñ–¥ –∑ viewport)

4. bioEp –ø–µ—Ä–µ–≤—ñ—Ä—è—î cookie (—è–∫—â–æ –ø–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–æ—Ç—è–≥–æ–º 30 –¥–Ω—ñ–≤ - –Ω–µ –ø–æ–∫–∞–∑—É—î)
5. bioEp –≤–∏–∫–ª–∏–∫–∞—î window.bioEp.showPopup() –ø—Ä–∏ exit-intent
6. exit-intent-overlay.js –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î showPopup() —Ç–∞ —Ç—Ä–∏–≥–µ—Ä–∏—Ç—å GenerateBlocks Overlay
7. Popup –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é Scale In
8. bioEp –∑–±–µ—Ä—ñ–≥–∞—î cookie –Ω–∞ 30 –¥–Ω—ñ–≤ —á–µ—Ä–µ–∑ cookieManager
9. –§–æ—Ä–º–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Events API
10. –ó–∞–∫—Ä–∏—Ç—Ç—è —á–µ—Ä–µ–∑ data-gb-close-panel (–∫–Ω–æ–ø–∫–∞ X –∞–±–æ "–ù—ñ, –¥—è–∫—É—é")

‚ö° –û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–Ø (v2.1.3):
- bioEp –ù–ï —Å—Ç–≤–æ—Ä—é—î –≤–ª–∞—Å–Ω–∏–π DOM popup (addPopup –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–æ)
- bioEp –ù–ï –≤–ø—Ä–æ–≤–∞–¥–∂—É—î –≤–ª–∞—Å–Ω—ñ —Å—Ç–∏–ª—ñ (addCSS –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–æ)
- bioEp –ù–ï –ø—Ä–∏–≤'—è–∑—É—î –ø–æ–¥—ñ—ó –¥–æ –Ω–µ—ñ—Å–Ω—É—é—á–∏—Ö DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (loadEvents –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–æ)
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–∞—Ç—á—É (window.mediciBioEpPatched flag)
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –¢–Ü–õ–¨–ö–ò:
  ‚Ä¢ Exit-intent detector (mouseout ‚Üí top viewport)
  ‚Ä¢ Cookie manager (bioep_shown, 30 –¥–Ω—ñ–≤)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π overhead, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, –±–µ–∑ –ø–æ–º–∏–ª–æ–∫, SPA-safe

üì¶ –®–û–†–¢–ö–û–î –ó–ê–ú–Ü–°–¢–¨ HTML (v1.1.0+):

–ü–†–û–ë–õ–ï–ú–ê –∑ HTML block:
- WordPress —Ä–µ–¥–∞–∫—Ç–æ—Ä "—Å–∞–Ω—ñ—Ç–∞–π–∑–∏—Ç—å" HTML –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ
- –í–∏–¥–∞–ª—è—î <form>, <input>, <svg>, <button> –µ–ª–µ–º–µ–Ω—Ç–∏
- JS handler –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å .js-exit-intent-form ‚Üí —Ñ–æ—Ä–º–∞ –Ω–µ –ø—Ä–∞—Ü—é—î
- CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –Ω–µ –º–∞—Ç—á–∞—Ç—å—Å—è ‚Üí —Å—Ç–∏–ª—ñ "–Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å"
- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –ø–æ—Ä–æ–∂–Ω—è (SVG –≤–∏–¥–∞–ª–µ–Ω–æ)

–†–Ü–®–ï–ù–ù–Ø - Shortcode block:
‚úÖ –ì–∞—Ä–∞–Ω—Ç—É—î –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—î—ó —Ä–æ–∑–º—ñ—Ç–∫–∏
‚úÖ WordPress –ù–ï —Å–∞–Ω—ñ—Ç–∞–π–∑–∏—Ç—å –≤–º—ñ—Å—Ç —à–æ—Ä—Ç–∫–æ–¥–∞
‚úÖ –§–æ—Ä–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –Ω–∞ backend —á–µ—Ä–µ–∑ PHP (–Ω–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä)
‚úÖ –í—Å—ñ –∫–ª–∞—Å–∏/–∞—Ç—Ä–∏–±—É—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è (.js-exit-intent-form, [data-gb-close-panel])
‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç–∏ (title, subtitle, button_text)

–¢–ï–•–ù–Ü–ß–ù–ê –†–ï–ê–õ–Ü–ó–ê–¶–Ü–Ø:
- inc/exit-intent/class-exit-intent-public.php:174-256
  ‚Ä¢ register_shortcodes() - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ init hook
  ‚Ä¢ render_popup_shortcode() - —Ä–µ–Ω–¥–µ—Ä —á–µ—Ä–µ–∑ ob_start()
- inc/exit-intent/class-exit-intent.php:94-100
  ‚Ä¢ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Exit_Intent_Loader pattern
- –ë–µ–∑–ø–µ–∫–∞: sanitize_text_field() + wp_kses() + esc_html()
- WordPress Coding Standards compliant
-->

<!-- wp:html -->
<div class="exit-intent-content">
	<!-- Close Button -->
	<button class="exit-intent-close" type="button" aria-label="–ó–∞–∫—Ä–∏—Ç–∏" data-gb-close-panel>
		<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M18 6L6 18M6 6L18 18"
				stroke="currentColor"
				stroke-width="2"
				stroke-linecap="round"
			/>
		</svg>
	</button>

	<!-- Emoji Icon -->
	<div class="exit-intent-icon">üëã</div>

	<!-- Heading -->
	<h2 class="exit-intent-heading">–ó–∞—á–µ–∫–∞–π—Ç–µ! –ù–µ –π–¥—ñ—Ç—å –±–µ–∑ –ø–æ–¥–∞—Ä—É–Ω–∫–∞</h2>

	<!-- Subheading -->
	<p class="exit-intent-subheading">
		–û—Ç—Ä–∏–º–∞–π—Ç–µ <strong>–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—É 30-—Ö–≤–∏–ª–∏–Ω–Ω—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</strong> –∑ –º–µ–¥–∏—á–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É –≤—ñ–¥ –Ω–∞—à–∏—Ö
		–µ–∫—Å–ø–µ—Ä—Ç—ñ–≤.
	</p>

	<!-- Form -->
	<form class="js-exit-intent-form exit-intent-form">
		<!-- Name Field -->
		<div class="exit-intent-field">
			<label for="exit-name" class="sr-only">–Ü–º'—è</label>
			<input
				type="text"
				id="exit-name"
				name="name"
				placeholder="–í–∞—à–µ —ñ–º'—è"
				required
				autocomplete="name"
			/>
		</div>

		<!-- Email Field -->
		<div class="exit-intent-field">
			<label for="exit-email" class="sr-only">Email</label>
			<input
				type="email"
				id="exit-email"
				name="email"
				placeholder="email@example.com"
				required
				autocomplete="email"
			/>
		</div>

		<!-- Phone Field -->
		<div class="exit-intent-field">
			<label for="exit-phone" class="sr-only">–¢–µ–ª–µ—Ñ–æ–Ω</label>
			<input
				type="tel"
				id="exit-phone"
				name="phone"
				placeholder="+380 XX XXX XX XX"
				required
				autocomplete="tel"
			/>
		</div>

		<!-- Consent Checkbox -->
		<div class="exit-intent-consent">
			<label>
				<input type="checkbox" name="consent" required />
				<span> –Ø –¥–∞—é –∑–≥–æ–¥—É –Ω–∞ –æ–±—Ä–æ–±–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö <span class="required">*</span> </span>
			</label>
		</div>

		<!-- Submit Button -->
		<button type="submit" class="exit-intent-submit">–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</button>

		<!-- Message Container -->
		<div class="js-exit-intent-message exit-intent-message" role="status" aria-live="polite"></div>
	</form>

	<!-- Decline Link -->
	<a href="#" class="exit-intent-decline" data-gb-close-panel> –ù—ñ, –¥—è–∫—É—é, –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–µ—Ä–µ–≥–ª—è–¥ </a>
</div>
<!-- /wp:html -->

<!--
–ü–†–ò–ú–Ü–¢–ö–ê:
- Overlay Panel –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î backdrop –∑ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è–º
- Exit Intent trigger —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –∫–æ–ª–∏ –º–∏—à–∫–∞ –π–¥–µ –¥–æ –≤–µ—Ä—Ö–Ω—å–æ—ó —á–∞—Å—Ç–∏–Ω–∏ –µ–∫—Ä–∞–Ω—É
- Show once per session –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω —É localStorage
- data-gb-close-panel - GenerateBlocks –∞—Ç—Ä–∏–±—É—Ç –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –ø–∞–Ω–µ–ª—ñ
- –§–æ—Ä–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Events API (consultation_request)

CSS –°–¢–ò–õ–Ü:
–î–æ–¥–∞–π—Ç–µ –≤ style.css –∞–±–æ –æ–∫—Ä–µ–º–∏–π CSS —Ñ–∞–π–ª (css/components/exit-intent-overlay.css)
-->
