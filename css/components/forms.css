/**
 * ============================================================================
 * MEDICI.AGENCY - FORMS STYLES (BEM REFACTORED)
 * File: css/components/forms.css
 * Version: 2.1.1
 * ============================================================================
 *
 * BEM NAMING CONVENTION:
 * - Block: .newsletter-form, .consultation-form
 * - Element: .newsletter-form__field, .consultation-form__submit
 * - Modifier: .newsletter-form__message--success, .consultation-form--compact
 *
 * JS HOOKS (separate from styling):
 * - .js-newsletter-form, .js-consultation-form
 * - .js-form-field, .js-form-submit
 *
 * ⚠️ ВАЖЛИВО: Використання !important
 * ----------------------------------------------------------------------------
 * Цей файл використовує !important НАВМИСНО для перевизначення:
 * - GeneratePress Premium default styles (дуже агресивні)
 * - GenerateBlocks Pro container styles
 * - WordPress editor styles
 *
 * Видалення !important ЗЛАМАЄ форми на сайті!
 *
 * @since 2.1.1 - Syntax + alignment fixes, JS/CSS textarea wrapper compatibility
 * @since 2.1.0 - Documentation update, code audit
 * @since 2.0.0 - BEM refactoring
 * @since 1.3.4 - Initial version
 */

/* ============================================
   NEWSLETTER FORM (Events API)
   Block: .newsletter-form
============================================ */

.newsletter-form {
	display: block !important;
	margin: 0 auto !important;
	padding: 2rem !important;
	background: transparent !important;
	max-width: 500px !important;
}

.newsletter-form__inner {
	display: flex !important;
	flex-direction: column !important;
	gap: 1.5rem !important;
}

.newsletter-form__heading {
	display: block !important;
	margin: 0 0 0.5rem !important;
	color: var(--color-gray-900) !important;
	font-size: 1.5rem !important;
	font-weight: 700 !important;
	line-height: 1.2 !important;
}

.newsletter-form__description {
	display: block !important;
	margin: 0 !important;
	color: var(--gray-500) !important;
	font-size: 0.9375rem !important;
	line-height: 1.5 !important;
}

.newsletter-form__field {
	display: flex !important;
	flex-direction: column !important;
	gap: 0.5rem !important;
}

.newsletter-form__label {
	display: block !important;
	color: var(--color-gray-900) !important;
	font-weight: 600 !important;
	font-size: 0.875rem !important;
}

/* КРИТИЧНО: Input поле МУСИТЬ бути видимим */
.newsletter-form .newsletter-form__field input,
.newsletter-form input[type='email'],
.newsletter-form__field input[type='email'],
.newsletter-form__input {
	position: static !important;
	display: block !important;
	width: 100% !important;
	margin: 0 !important;
	padding: 0.75rem 1rem !important;

	border: 2px solid var(--gray-300) !important;
	border-radius: 4px !important;

	color: var(--color-gray-900) !important;

	opacity: 1 !important;
	visibility: visible !important;

	min-height: 44px !important;
	box-sizing: border-box !important;

	background-color: var(--color-gray-50) !important;
	background-image: none !important;

	font-size: 1rem !important;
	font-family: inherit !important;
	line-height: 1.5 !important;

	-webkit-appearance: none !important;
	-moz-appearance: none !important;
	appearance: none !important;
}

.newsletter-form__input:focus,
.newsletter-form__field input:focus,
.newsletter-form input[type='email']:focus {
	outline: none !important;
	border-color: var(--blue-600) !important;
	box-shadow: 0 0 0 3px rgb(37 99 235 / 10%) !important;
}

.newsletter-form__input::placeholder,
.newsletter-form__field input::placeholder {
	color: var(--gray-400) !important;
	opacity: 1 !important;
}

/* Error state modifier */
.newsletter-form__input--error,
.newsletter-form__field--error input {
	border-color: var(--color-error) !important;
}

.newsletter-form__submit {
	display: inline-block !important;
	padding: 0.75rem 2rem !important;
	background: var(--blue-600) !important;
	border: none !important;
	border-radius: 4px !important;
	color: #fff !important;
	transition: all 0.2s ease !important;
	font-size: 1rem !important;
	font-weight: 600 !important;
	cursor: pointer !important;
	min-height: 44px !important;
}

.newsletter-form__submit:hover:not(:disabled) {
	background: var(--blue-700) !important;
	transform: translateY(-1px) !important;
}

.newsletter-form__submit:disabled,
.newsletter-form__submit--loading {
	opacity: 0.6 !important;
	cursor: not-allowed !important;
}

.newsletter-form__message {
	display: block !important;
	margin-top: 0.25rem !important;
	padding: 0.75rem 1rem !important;
	border-radius: 4px !important;
	font-size: 0.875rem !important;
	line-height: 1.5 !important;
}

.newsletter-form__message--success {
	background: rgb(34 197 94 / 10%) !important;
	border: 1px solid var(--color-green) !important;
	color: var(--color-green) !important;
}

.newsletter-form__message--error {
	background: rgb(239 68 68 / 10%) !important;
	border: 1px solid var(--color-error) !important;
	color: var(--color-danger) !important;
}

/* ============================================
   CONSULTATION FORM (Events API)
   Block: .consultation-form
============================================ */

.consultation-form {
	display: block !important;
	margin: 0 auto !important;
	padding: 2rem !important;
	max-width: 600px !important;
	background: transparent !important;
}

.consultation-form__inner {
	display: flex !important;
	flex-direction: column !important;
	gap: 1.5rem !important;
}

.consultation-form__heading {
	display: block !important;
	margin: 0 !important;
	color: var(--color-gray-900) !important;
	font-size: 1.75rem !important;
	font-weight: 700 !important;
	line-height: 1.2 !important;
}

.consultation-form__description {
	display: block !important;
	margin: 0 !important;
	color: var(--gray-500) !important;
	font-size: 0.9375rem !important;
	line-height: 1.5 !important;
}

.consultation-form__field {
	display: flex !important;
	flex-direction: column !important;
	gap: 0.5rem !important;
}

.consultation-form__label {
	display: block !important;
	color: var(--color-gray-900) !important;
	font-weight: 600 !important;
	font-size: 0.875rem !important;
}

.consultation-form__required {
	color: var(--color-error) !important;
}

/* КРИТИЧНО: Всі поля форми МУСЯТЬ бути видимими */
.consultation-form .consultation-form__field input,
.consultation-form .consultation-form__field select,
.consultation-form .consultation-form__field textarea,
.consultation-form__input,
.consultation-form__select,
.consultation-form__textarea {
	position: static !important;
	display: block !important;
	width: 100% !important;
	margin: 0 !important;
	padding: 0.75rem 1rem !important;

	border: 2px solid var(--gray-300) !important;
	border-radius: 4px !important;

	color: var(--color-gray-900) !important;

	opacity: 1 !important;
	visibility: visible !important;

	min-height: 44px !important;
	box-sizing: border-box !important;

	background-color: var(--color-gray-50) !important;
	background-image: none !important;

	font-size: 1rem !important;
	font-family: inherit !important;
	line-height: 1.5 !important;

	-webkit-appearance: auto !important;
	-moz-appearance: auto !important;
	appearance: auto !important;
}

.consultation-form__textarea,
.consultation-form .consultation-form__field textarea {
	min-height: 120px !important;
	resize: none !important;
}

/* Focus */
.consultation-form__input:focus,
.consultation-form__select:focus,
.consultation-form__textarea:focus,
.consultation-form .consultation-form__field input:focus,
.consultation-form .consultation-form__field select:focus,
.consultation-form .consultation-form__field textarea:focus {
	outline: none !important;
	border-color: var(--blue-600) !important;
	box-shadow: 0 0 0 3px rgb(37 99 235 / 10%) !important;
}

/* Placeholder */
.consultation-form__input::placeholder,
.consultation-form__textarea::placeholder,
.consultation-form .consultation-form__field input::placeholder,
.consultation-form .consultation-form__field textarea::placeholder {
	color: var(--gray-400) !important;
	opacity: 1 !important;
}

/* Error state modifier */
.consultation-form__input--error,
.consultation-form__select--error,
.consultation-form__textarea--error,
.consultation-form__field--error input,
.consultation-form__field--error select,
.consultation-form__field--error textarea {
	border-color: var(--color-error) !important;
}

/* Select з SVG стрілкою */
.consultation-form select,
.consultation-form__select {
	cursor: pointer !important;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23111827' d='M6 9L1 4h10z'/%3E%3C/svg%3E") !important;
	background-repeat: no-repeat !important;
	background-position: right 0.75rem center !important;
	background-size: 12px !important;
	padding-right: 2.5rem !important;
}

/* Autogrowing Textarea - CSS Grid Technique
   Wrapper is created in JS as .consultation-form__textarea-wrapper (also includes .textarea-wrapper legacy)
*/
.consultation-form__textarea-wrapper,
.textarea-wrapper {
	position: relative !important;
	display: grid !important;
	width: 100% !important;
}

.consultation-form__textarea-wrapper::after,
.textarea-wrapper::after {
	content: attr(data-cloned-val) ' ' !important;
	white-space: pre-wrap !important;
	overflow-wrap: break-word !important;

	/* Match textarea geometry */
	grid-area: 1 / 1 / 2 / 2 !important;
	padding: 0.75rem 1rem !important;
	border: 2px solid transparent !important;

	visibility: hidden !important;
}

.consultation-form__textarea-wrapper textarea,
.textarea-wrapper textarea {
	grid-area: 1 / 1 / 2 / 2 !important;
}

.consultation-form__checkbox-row {
	display: flex !important;
	gap: 0.75rem !important;
	align-items: flex-start !important;
}

.consultation-form__checkbox-row input[type='checkbox'] {
	width: 18px !important;
	height: 18px !important;
	margin-top: 0.2rem !important;
	flex: 0 0 auto !important;
}

.consultation-form__submit {
	display: inline-block !important;
	padding: 0.75rem 2rem !important;
	background: var(--blue-600) !important;
	border: none !important;
	border-radius: 4px !important;
	color: #fff !important;
	transition: all 0.2s ease !important;
	font-size: 1rem !important;
	font-weight: 600 !important;
	cursor: pointer !important;
	min-height: 44px !important;
}

.consultation-form__submit:hover:not(:disabled) {
	background: var(--blue-700) !important;
	transform: translateY(-1px) !important;
}

.consultation-form__submit:disabled,
.consultation-form__submit--loading {
	opacity: 0.6 !important;
	cursor: not-allowed !important;
}

.consultation-form__message {
	display: block !important;
	margin-top: 0.25rem !important;
	padding: 0.75rem 1rem !important;
	border-radius: 4px !important;
	font-size: 0.875rem !important;
	line-height: 1.5 !important;
}

.consultation-form__message--success {
	background: rgb(34 197 94 / 10%) !important;
	border: 1px solid var(--color-green) !important;
	color: var(--color-green) !important;
}

.consultation-form__message--error {
	background: rgb(239 68 68 / 10%) !important;
	border: 1px solid var(--color-error) !important;
	color: var(--color-danger) !important;
}

/* ============================================
   DARK THEME SUPPORT
============================================ */

[data-theme='dark'] .newsletter-form__heading,
[data-theme='dark'] .consultation-form__heading,
[data-theme='dark'] .newsletter-form__label,
[data-theme='dark'] .consultation-form__label {
	color: var(--color-gray-50) !important;
}

[data-theme='dark'] .newsletter-form__description,
[data-theme='dark'] .consultation-form__description {
	color: var(--gray-300) !important;
}

[data-theme='dark'] .newsletter-form__input,
[data-theme='dark'] .newsletter-form__field input,
[data-theme='dark'] .newsletter-form input[type='email'],
[data-theme='dark'] .consultation-form__input,
[data-theme='dark'] .consultation-form__select,
[data-theme='dark'] .consultation-form__textarea,
[data-theme='dark'] .consultation-form__field input,
[data-theme='dark'] .consultation-form__field select,
[data-theme='dark'] .consultation-form__field textarea {
	color: var(--color-gray-50) !important;
	background-color: var(--gray-800) !important;
	border-color: rgb(255 255 255 / 20%) !important;
}

[data-theme='dark'] .consultation-form__select,
[data-theme='dark'] .consultation-form select {
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23f9fafb' d='M6 9L1 4h10z'/%3E%3C/svg%3E") !important;
}

[data-theme='dark'] .newsletter-form__input:focus,
[data-theme='dark'] .newsletter-form__field input:focus,
[data-theme='dark'] .consultation-form__input:focus,
[data-theme='dark'] .consultation-form__select:focus,
[data-theme='dark'] .consultation-form__textarea:focus,
[data-theme='dark'] .consultation-form__field input:focus,
[data-theme='dark'] .consultation-form__field select:focus,
[data-theme='dark'] .consultation-form__field textarea:focus {
	border-color: var(--blue-500) !important;
	box-shadow: 0 0 0 3px rgb(59 130 246 / 20%) !important;
}

[data-theme='dark'] .newsletter-form__input::placeholder,
[data-theme='dark'] .newsletter-form__field input::placeholder,
[data-theme='dark'] .consultation-form__input::placeholder,
[data-theme='dark'] .consultation-form__textarea::placeholder,
[data-theme='dark'] .consultation-form__field input::placeholder,
[data-theme='dark'] .consultation-form__field textarea::placeholder {
	color: var(--gray-500) !important;
}

[data-theme='dark'] .newsletter-form__message--success,
[data-theme='dark'] .consultation-form__message--success {
	background: rgb(34 197 94 / 20%) !important;
	color: #4ade80 !important;
	border-color: var(--color-green) !important;
}

[data-theme='dark'] .newsletter-form__message--error,
[data-theme='dark'] .consultation-form__message--error {
	background: rgb(239 68 68 / 20%) !important;
	color: #fca5a5 !important;
	border-color: var(--color-error) !important;
}

/* ============================================
   RESPONSIVE (MOBILE)
============================================ */

@media (width <= 767px) {
	.newsletter-form,
	.consultation-form {
		padding: 1rem !important;
	}

	.newsletter-form__heading {
		font-size: 1.25rem !important;
	}

	.consultation-form__heading {
		font-size: 1.5rem !important;
	}

	/* 16px для запобігання iOS zoom */
	.newsletter-form__input,
	.newsletter-form__field input,
	.newsletter-form input,
	.consultation-form__input,
	.consultation-form__select,
	.consultation-form__textarea,
	.consultation-form__field input,
	.consultation-form__field select,
	.consultation-form__field textarea {
		font-size: 16px !important;
	}
}

/* ============================================
   ACCESSIBILITY
============================================ */

.sr-only {
	position: absolute !important;
	width: 1px !important;
	height: 1px !important;
	margin: -1px !important;
	padding: 0 !important;
	overflow: hidden !important;
	clip: rect(0, 0, 0, 0) !important;
	white-space: nowrap !important;
	border-width: 0 !important;
}

/* ============================================
   EXIT-INTENT POPUP
   @since 2.1.0 - Exit-intent popup styles
============================================ */

/* Overlay backdrop */
.exit-popup__overlay {
	position: fixed !important;
	inset: 0 !important;

	z-index: 99998 !important;
	background: rgb(0 0 0 / 60%) !important;

	-webkit-backdrop-filter: blur(4px) !important;
	backdrop-filter: blur(4px) !important;

	transition: opacity 0.3s ease, visibility 0.3s ease !important;

	opacity: 0 !important;
	visibility: hidden !important;
}

.exit-popup__overlay.exit-popup--visible {
	opacity: 1 !important;
	visibility: visible !important;
}

/* Popup container */
.exit-popup {
	position: fixed !important;
	top: 50% !important;
	left: 50% !important;

	z-index: 99999 !important;
	width: calc(100% - 2rem) !important;
	max-width: 480px !important;
	max-height: calc(100vh - 2rem) !important;

	overflow-y: auto !important;

	background: var(--bg-card, #fff) !important;
	border: 1px solid var(--border-color, #e5e7eb) !important;
	border-radius: var(--border-radius-xl, 16px) !important;
	box-shadow: var(--shadow-xl, 0 20px 40px rgb(0 0 0 / 15%)) !important;

	transform: translate(-50%, -50%) scale(0.9) !important;

	transition:
		opacity 0.3s ease,
		visibility 0.3s ease,
		transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) !important;

	opacity: 0 !important;
	visibility: hidden !important;
}

.exit-popup.exit-popup--visible {
	transform: translate(-50%, -50%) scale(1) !important;
	opacity: 1 !important;
	visibility: visible !important;
}

/* Close button */
.exit-popup__close {
	position: absolute !important;
	top: 1rem !important;
	right: 1rem !important;

	display: flex !important;
	justify-content: center !important;
	align-items: center !important;

	width: 40px !important;
	height: 40px !important;
	padding: 0 !important;

	background: transparent !important;
	border: none !important;
	border-radius: 50% !important;

	color: var(--text-secondary, #4b5563) !important;
	transition: var(--transition-fast, all 0.15s ease) !important;
	cursor: pointer !important;
}

.exit-popup__close:hover {
	background: var(--border-color, #e5e7eb) !important;
	color: var(--text-primary, #1a1a1a) !important;
}

.exit-popup__close svg {
	width: 24px !important;
	height: 24px !important;
}

/* Content container */
.exit-popup__content {
	display: flex !important;
	flex-direction: column !important;
	gap: 1.5rem !important;

	padding: 2.5rem !important;

	text-align: center !important;
}

/* Icon */
.exit-popup__icon {
	font-size: 3rem !important;
	line-height: 1 !important;
	margin-bottom: 0.5rem !important;
}

/* Title */
.exit-popup__title {
	margin: 0 !important;
	color: var(--text-primary, #1a1a1a) !important;
	font-size: var(--step-2, 1.75rem) !important;
	font-weight: var(--font-bold, 700) !important;
	line-height: var(--leading-tight, 1.2) !important;
}

/* Description */
.exit-popup__description {
	margin: 0 !important;
	color: var(--text-secondary, #4b5563) !important;
	font-size: var(--step-0, 1rem) !important;
	line-height: var(--leading-normal, 1.6) !important;
}

.exit-popup__description strong {
	color: var(--accent, #2563eb) !important;
	font-weight: var(--font-semibold, 600) !important;
}

/* Form */
.exit-popup__form {
	display: flex !important;
	flex-direction: column !important;
	gap: 1rem !important;
	text-align: left !important;
}

.exit-popup__field {
	display: flex !important;
	flex-direction: column !important;
	gap: 0.5rem !important;
}

.exit-popup__label {
	color: var(--text-primary, #1a1a1a) !important;
	font-size: var(--text-sm, 0.875rem) !important;
	font-weight: var(--font-semibold, 600) !important;
}

.exit-popup__input {
	display: block !important;
	width: 100% !important;

	padding: 0.75rem 1rem !important;

	border: 2px solid var(--border-color, #e5e7eb) !important;
	border-radius: 8px !important;

	background: var(--bg, #fff) !important;
	color: var(--text-primary, #111827) !important;

	font-size: 1rem !important;
	line-height: 1.5 !important;

	box-sizing: border-box !important;
}

.exit-popup__input:focus {
	outline: none !important;
	border-color: var(--accent, #2563eb) !important;
	box-shadow: 0 0 0 3px rgb(37 99 235 / 15%) !important;
}

.exit-popup__submit {
	display: inline-block !important;
	width: 100% !important;

	padding: 0.85rem 1rem !important;

	border: none !important;
	border-radius: 10px !important;

	background: var(--accent, #2563eb) !important;
	color: #fff !important;

	font-size: 1rem !important;
	font-weight: 700 !important;

	cursor: pointer !important;
	transition: transform 0.15s ease, background 0.15s ease !important;

	min-height: 44px !important;
}

.exit-popup__submit:hover:not(:disabled) {
	background: var(--blue-700) !important;
	transform: translateY(-1px) !important;
}

.exit-popup__submit:disabled {
	opacity: 0.6 !important;
	cursor: not-allowed !important;
}